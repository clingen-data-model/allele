---

iri: "/allele/resource/canonical_allele"
title: "CanonicalAllele"
attributes:
  - title: id
    iri: "/allele/resource/canonical_allele/#id"
    min: 1
    max: 1
    type: "https://www.hl7.org/fhir/datatypes.html#id"
  - title: version
    iri: "/allele/resource/canonical_allele/#version"
    min: 1
    max: 1
    type: "http://www.w3.org/2001/XMLSchema#string"
  - title: meta
    iri: "/allele/resource/canonical_allele/#meta"
    min: 0
    max: 1
    type: "http://hl7.org/fhir/resource.html#Meta"
  - title: identifier
    iri: "/allele/resource/canonical_allele/#identifer"
    min: 0
    max: "*"
    type: "https://www.hl7.org/fhir/datatypes.html#identifier"
  - title: relatedIdentifier
    iri: "/allele/resource/canonical_allele/#relatedIdentifier"
    min: 0
    max: "*"
    type: "https://www.hl7.org/fhir/datatypes.html#identifier"
  - title: active
    iri: "/allele/resource/canonical_allele/#active"
    min: 0
    max: 1
    type: "http://www.w3.org/2001/XMLSchema#boolean"
  - title: replacement
    iri: "/allele/resource/canonical_allele/#replacement"
    min: 0
    max: "*"
    type: "/allele/resource/canonical_allele"
  - title: canonicalAlleleType
    iri: "/allele/resource/canonical_allele/#canonicalAlleleType"
    min: 1
    max: 1
    type: "https://www.hl7.org/fhir/datatypes.html#code"
    binding: "/allele/implementation/value_set_list/canonical_allele_type.html"
  - title: complexity
    iri: "/allele/resource/canonical_allele/#complexity"
    min: 1
    max: 1
    type: "https://www.hl7.org/fhir/datatypes.html#code"
    binding: "/allele/implementation/value_set_list/canonical_allele_complexity.html"
  - title: nested
    iri: "/allele/resource/canonical_allele/#nested"
    min: 0
    max: "*"
    type: "/allele/resource/canonical_allele"



# context:
#   - property: id
#     control: 1..1
#     type: Id
#     definition: The logical identifier assigned by the source storage system.
#     requirements: 
          
#   - property: version
#     control: 0..1
#     type: string

          
#   - property: meta
#     control: 0..1
#     type: Meta

      
#   - property: identifier
#     control: 0..*
#     type: Identifier

#     requirements: 

#   - property: relatedIdentifier
#     control: 0..*
#     type: Identifier
#     definition: Business identifier(s) assigned by external authorities that are not exactly representative of the CanonicalAllele instance, but provide a noteworthy alternative representation.
#     requirements: 
    
#   - property: active
#     control: 0..1
#     type: boolean
#     definition: Is the CanonicalAllele active, or is it invalid or superceded by a different CanonicalAllele.
#     requirements: |
#       The `replacement` property MUST contain one or more items if this is *true*, otherwise `replacement` MUST be empty.

#   - property: replacement
#     control: 0..*
#     type: Replacement
#     definition: The CanonicalAllele to use instead in case it is found to describe the same allele as another CanonicalAllele
#     requirements: >

#   - property: canonicalAlleleType
#     control: 1..1
#     type: code
#     binding: CanonicalAlleleType
#     definition: TODO
#     requirements: >

#   - property: complexity
#     control: 1..1
#     type: code
#     binding: CanonicalAlleleComplexity
#     definition: Is the CanonicalAllele represented by one ContextualAllele, or is it a composition of multiple CanonicalAlleles?
#     requirements: |
#       If this allele is simple, then it can contain one or more ContextualAlleles in the relatedContextualAllele property. This value is immutable.

#   - property: nested
#     control: 0..*
#     type: CanonicalAllele
#     definition: The set of CanonicalAlleles that compose this ComplexCanonicalAllele. The children CanonicalAlleles of a complex CanonicalAllele instance.
#     requirements: |
#       This is closely related to the CanonicalAllele.complexity and CanonicalAllele.relatedContextualAllele fields:

#       * if `complexity` is simple, then this list MUST be empty
#       * if `complexity` is complex, then this list MUST contain 2 or more CanonicalAlleles (each
#         with `complexity` simple) AND relatedContextualAllele MUST be empty.

#       Notes: - the cardinality of this property is actually 0,2..* (i.e. anything but one)
#              - currently, the idea of nesting complex CanonicalAlleles within other complex CanonicalAlleles is not supported. 
      
#   - property: composite
#     control: 0..*
#     type: CanonicalAllele
#     definition: The composite, parent or complex CanonicalAllele instance(s) that this Canonical Allele is part of. 
#     requirements: |
#       * If this CanonicalAllele participates in one or more complex CanonicalAlleles then the `complexity` must be simple.
#       * It is not requirement to pass the association to the set of complex CanonicalAlleles unless it is useful to the receiving service.

#   - property: replacement
#     control: 0..*
#     type: 
#     binding: CanonicalAllele.Replacement
#     definition: The CanonicalAllele instance(s) that subsequently replaced this CanonicalAllele.  
#     requirements: |
#       If one or more `replacement` references exist then this CanonicalAllele should be `active` equal to false or inactive.
      
#   - property: replacement.replacementType
#     control: 1..1
#     type: code
#     binding: CanonicalAlleleReplacementType
#     definition: Code for the type of replacement that occurs when CanonicalAlleles are merged or split after being published.  
#     requirements: 
      
#   - property: replacement.split
#     control: 0..1
#     type: boolean
#     definition: A boolean indicating whether or not the `target` was replaced by more than one CanonicalAllele. 
#     requirements: |
#       It may be possible to conceptually split a pre-existing CanonicalAllele and replace it with more than one new CanonicalAllele, without actually creating all of the new replacements.  This indicator provides a definitive value to represent whether the `target` represented more than one CanonicalAllele to begin with. 
      
#   - property: replacement.target
#     control: 1..1
#     type: CanonicalAllele
#     definition: A reference to either the CanonicalAllele that replaces or is replaced-by the primary CanonicalAllele with which it is associated. 
#     requirements: 
      
#   - property: relatedContextualAllele
#     control: 0..*
#     type: 
#     definition: The set of ContextualAlleles that are canonically equivalent.
#     requirements: >
#       If this set changes over time then the CanonicalAllele.version should be incremented to allow external references to maintain a stable representation of their original reference.

#   - property: relatedContextualAllele.contextualAllele
#     control: 1..1
#     type: ContextualAllele
#     definition: A reference to a ContextualAllele that is part of the set of CanonicalAllele.relatedContextualAlleles.
#     requirements: 

#   - property: relatedContextualAllele.preferred
#     control: 0..1
#     type: boolean
#     definition: An indicator as to whether this CanonicalAllele.relatedContextualAllele is the preferred representation for the CanonicalAllele.
#     requirements: |
#       * The current design provides this indicator as a basic means to producing a simplified human-readable representation of the CanonicalAllele by allowing the source system to determine which related ContextualAllele is preferred over all the others.
#       * One and only one of the relatedContextualAlleles must be set as the preferred one.  If a new related ContextualAllele is added or an existing one updated as preferred it would automatically override the prior related ContextualAllele that was set as preferred.
